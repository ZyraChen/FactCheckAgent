# åŒAgentè¾©è®ºå¼äº‹å®æ ¸æŸ¥ç³»ç»Ÿ - é¡¹ç›®æ¦‚è§ˆ

## ğŸ“Š é¡¹ç›®ç»Ÿè®¡

- **æ€»æ–‡ä»¶æ•°**: 39ä¸ª
- **Pythonæ–‡ä»¶**: 27ä¸ª  
- **æ ¸å¿ƒæ¨¡å—**: 15ä¸ª
- **æµ‹è¯•æ–‡ä»¶**: 2ä¸ª
- **æ–‡æ¡£æ–‡ä»¶**: 4ä¸ª

## ğŸ—ï¸ å®Œæ•´æ–‡ä»¶ç»“æ„

```
debate_fact_checker/
â”‚
â”œâ”€â”€ README.md                          # é¡¹ç›®è¯´æ˜æ–‡æ¡£
â”œâ”€â”€ EXAMPLES.py                        # ä½¿ç”¨ç¤ºä¾‹
â”œâ”€â”€ requirements.txt                   # Pythonä¾èµ–
â”œâ”€â”€ config.py                          # é…ç½®æ–‡ä»¶
â”œâ”€â”€ main.py                            # ä¸»ç¨‹åºå…¥å£ â­
â”œâ”€â”€ test_basic.py                      # åŸºç¡€åŠŸèƒ½æµ‹è¯•
â”‚
â”œâ”€â”€ data/                              # æ•°æ®ç›®å½•
â”‚   â””â”€â”€ dataset_part_1.json           # ç¤ºä¾‹æ•°æ®é›†
â”‚
â”œâ”€â”€ output/                            # è¾“å‡ºç›®å½•(è‡ªåŠ¨ç”Ÿæˆ)
â”‚   â”œâ”€â”€ argumentation_graph.json     # è®ºè¾©å›¾
â”‚   â”œâ”€â”€ verdict.json                  # åˆ¤å†³ç»“æœ
â”‚   â””â”€â”€ results.json                  # æ‰¹é‡å¤„ç†ç»“æœ
â”‚
â”œâ”€â”€ core/                              # æ ¸å¿ƒæ•°æ®ç»“æ„ â­
â”‚   â”œâ”€â”€ __init__.py
â”‚   â”œâ”€â”€ argumentation_graph.py        # è®ºè¾©å›¾(èŠ‚ç‚¹+è¾¹)
â”‚   â””â”€â”€ evidence_pool.py              # è¯æ®æ± 
â”‚
â”œâ”€â”€ agents/                            # Agentå®ç° â­
â”‚   â”œâ”€â”€ __init__.py
â”‚   â”œâ”€â”€ pro_agent.py                  # æ”¯æŒæ–¹Agent
â”‚   â”œâ”€â”€ con_agent.py                  # åå¯¹æ–¹Agent
â”‚   â””â”€â”€ judge_agent.py                # æ³•å®˜Agent
â”‚
â”œâ”€â”€ tools/                             # å·¥å…·æ¨¡å— â­
â”‚   â”œâ”€â”€ __init__.py
â”‚   â”œâ”€â”€ jina_search.py                # Jina Search APIå°è£…
â”‚   â”œâ”€â”€ priority_calculator.py        # ä¼˜å…ˆçº§è®¡ç®—
â”‚   â””â”€â”€ attack_detector.py            # æ”»å‡»å…³ç³»æ£€æµ‹
â”‚
â”œâ”€â”€ reasoning/                         # æ¨ç†å¼•æ“ â­
â”‚   â”œâ”€â”€ __init__.py
â”‚   â””â”€â”€ semantics.py                  # å½¢å¼åŒ–è¯­ä¹‰(Grounded Extension)
â”‚
â”œâ”€â”€ llm/                               # LLMæ¥å£ â­
â”‚   â”œâ”€â”€ __init__.py
â”‚   â””â”€â”€ claude_client.py              # Claude APIå°è£…
â”‚
â”œâ”€â”€ state/                             # çŠ¶æ€ç®¡ç†(ä¸ºLangGraphå‡†å¤‡)
â”‚   â”œâ”€â”€ __init__.py
â”‚   â””â”€â”€ debate_state.py               # å…¨å±€çŠ¶æ€å®šä¹‰
â”‚
â”œâ”€â”€ graph/                             # LangGraphå·¥ä½œæµ(éƒ¨åˆ†å®ç°)
â”‚   â”œâ”€â”€ __init__.py
â”‚   â””â”€â”€ nodes_search.py               # æœç´¢èŠ‚ç‚¹
â”‚
â”œâ”€â”€ utils/                             # å·¥å…·æ¨¡å—
â”‚   â”œâ”€â”€ __init__.py
â”‚   â””â”€â”€ models.py                     # Pydanticæ•°æ®æ¨¡å‹ â­
â”‚
â””â”€â”€ tests/                             # æµ‹è¯•ç›®å½•
    â””â”€â”€ __init__.py
```

## ğŸ“‹ æ ¸å¿ƒæ–‡ä»¶è¯´æ˜

### 1. ä¸»ç¨‹åº (`main.py`)
- **åŠŸèƒ½**: ç³»ç»Ÿå…¥å£,åè°ƒæ•´ä¸ªè¾©è®ºæµç¨‹
- **å…³é”®å‡½æ•°**:
  - `run_debate_system()`: è¿è¡Œå•ä¸ªclaimæ ¸æŸ¥
  - `process_dataset()`: æ‰¹é‡å¤„ç†æ•°æ®é›†
- **ä½¿ç”¨**: `python main.py --claim "xxx" --rounds 3`

### 2. æ•°æ®æ¨¡å‹ (`utils/models.py`)
å®šä¹‰äº†æ‰€æœ‰æ ¸å¿ƒæ•°æ®ç»“æ„:
- `Evidence`: è¯æ®(å†…å®¹ã€æ¥æºã€å¯ä¿¡åº¦)
- `ArgumentNode`: è®ºè¯èŠ‚ç‚¹(å†…å®¹ã€è¯æ®IDã€ä¼˜å…ˆçº§)
- `AttackEdge`: æ”»å‡»è¾¹(æ”»å‡»è€…ã€è¢«æ”»å‡»è€…ã€å¼ºåº¦)
- `Verdict`: åˆ¤å†³ç»“æœ
- `ClaimData`: æ•°æ®é›†æ¡ç›®

### 3. è®ºè¾©å›¾ (`core/argumentation_graph.py`)
- **åŠŸèƒ½**: ç®¡ç†è®ºè¯èŠ‚ç‚¹å’Œæ”»å‡»å…³ç³»
- **å…³é”®æ–¹æ³•**:
  - `add_nodes()`: æ·»åŠ è®ºè¯èŠ‚ç‚¹
  - `add_edges()`: æ·»åŠ æ”»å‡»è¾¹(éªŒè¯ä¼˜å…ˆçº§è§„åˆ™)
  - `get_attackers()`: æŸ¥è¯¢æ”»å‡»å…³ç³»
  - `save_to_file()`: å¯¼å‡ºJSON

### 4. è¯æ®æ±  (`core/evidence_pool.py`)
- **åŠŸèƒ½**: å­˜å‚¨å’Œç®¡ç†æ‰€æœ‰è¯æ®
- **ç‰¹æ€§**: è‡ªåŠ¨å»é‡ã€æŒ‰Agent/è½®æ¬¡/å¯ä¿¡åº¦æŸ¥è¯¢

### 5. Pro/Con Agent (`agents/`)
- **åŠŸèƒ½**: ç‹¬ç«‹çš„è¾©è®ºAgent
- **æ ¸å¿ƒæ–¹æ³•**:
  - `generate_search_queries()`: ç”Ÿæˆæœç´¢è¯
  - `construct_arguments()`: æ„å»ºè®ºè¯èŠ‚ç‚¹

### 6. Judge Agent (`agents/judge_agent.py`)
- **åŠŸèƒ½**: åŸºäºè®ºè¾©å›¾åšæœ€ç»ˆåˆ¤å†³
- **æµç¨‹**:
  1. è®¡ç®—Grounded Extension
  2. è¯„ä¼°åŒæ–¹å¼ºåº¦
  3. ç”Ÿæˆåˆ¤å†³å’Œæ¨ç†

### 7. å½¢å¼åŒ–è¯­ä¹‰ (`reasoning/semantics.py`)
- **åŠŸèƒ½**: è®¡ç®—å¯æ¥å—è®ºè¯é›†
- **ç®—æ³•**: Grounded Semantics
- **æ ¸å¿ƒå‡½æ•°**: `compute_grounded_extension()`

### 8. Jina Search (`tools/jina_search.py`)
- **åŠŸèƒ½**: Jina APIå°è£…
- **ç‰¹æ€§**: æ”¯æŒæ‰¹é‡å¹¶è¡Œæœç´¢
- **è¿”å›**: æ ‡é¢˜ã€URLã€å†…å®¹

### 9. ä¼˜å…ˆçº§è®¡ç®— (`tools/priority_calculator.py`)
- **è§„åˆ™**:
  - High credibility: 1.0
  - Medium: 0.6
  - Low: 0.3
  - æ•°é‡åŠ æˆ: æœ€å¤š+0.1

### 10. æ”»å‡»æ£€æµ‹ (`tools/attack_detector.py`)
- **è§„åˆ™**: ä»…é«˜ä¼˜å…ˆçº§â†’ä½ä¼˜å…ˆçº§
- **æ¨¡å¼**: ç®€åŒ–ç‰ˆ(è§„åˆ™)+ LLMç‰ˆ(å¯é€‰)

## ğŸ”„ ç³»ç»Ÿå·¥ä½œæµç¨‹

```
è¾“å…¥Claim
    â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ è½®æ¬¡1 â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ 1. Pro/Conç”Ÿæˆæœç´¢è¯         â”‚
â”‚ 2. å¹¶è¡Œæœç´¢(Jina)           â”‚
â”‚ 3. è¯æ®åŠ å…¥è¯æ®æ±             â”‚
â”‚ 4. Proæ„å»ºè®ºè¯(å…ˆæ‰‹)        â”‚
â”‚ 5. Conæ„å»ºè®ºè¯(åæ‰‹)        â”‚
â”‚ 6. æ›´æ–°æ”»å‡»è¾¹               â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
    â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ è½®æ¬¡2 â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ (é‡å¤ä¸Šè¿°æ­¥éª¤)               â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
    â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ è½®æ¬¡3 â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ (é‡å¤ä¸Šè¿°æ­¥éª¤)               â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
    â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ Judge â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ 1. è®¡ç®—Grounded Extension   â”‚
â”‚ 2. è¯„ä¼°åŒæ–¹å¼ºåº¦              â”‚
â”‚ 3. ç”Ÿæˆåˆ¤å†³                  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
    â†“
è¾“å‡ºVerdict
```

## ğŸš€ å¿«é€Ÿå¼€å§‹

### 1. å®‰è£…
```bash
cd debate_fact_checker_v1.2
pip install -r requirements.txt
```

### 2. é…ç½®API Keys
```bash
export ANTHROPIC_API_KEY="your-key"
export JINA_API_KEY="your-key"
```

### 3. è¿è¡Œæµ‹è¯•
```bash
python test_basic.py
```

### 4. è¿è¡Œç¤ºä¾‹
```bash
# å•ä¸ªclaim
python main.py --claim "å†¥ç‹æ˜Ÿè·å¤ªé˜³æœ€è¿œçº¦ä¸º74äº¿å…¬é‡Œã€‚"

# æ•°æ®é›†
python main.py --dataset data/dataset_part_1.json --max-samples 5
```

## ğŸ“Š æ•°æ®é›†æ ¼å¼

```json
{
  "claim": "å¾…æ ¸æŸ¥çš„ä¸»å¼ ",
  "verdict": "Supported/Refuted/NEI",
  "evidence_sources": [
    {
      "content": "è¯æ®å†…å®¹",
      "url": "æ¥æºURL",
      "credibility": "High/Medium/Low"
    }
  ],
  "justification": "äººå·¥æ ‡æ³¨çš„åˆ¤æ–­ç†ç”±"
}
```

## ğŸ¯ æ ¸å¿ƒç‰¹æ€§

1. **åŒAgentç‹¬ç«‹è¾©è®º**: Proå’ŒConå„è‡ªæœç´¢è¯æ®,ä¸æ˜¯ç®€å•çš„å¯¹è¯
2. **è®ºè¾©å›¾åŠ¨æ€æ„å»º**: æ¯è½®å®æ—¶æ›´æ–°èŠ‚ç‚¹å’Œæ”»å‡»è¾¹
3. **ä¼˜å…ˆçº§æœºåˆ¶**: ä»…å…è®¸é«˜ä¼˜å…ˆçº§æ”»å‡»ä½ä¼˜å…ˆçº§
4. **å½¢å¼åŒ–æ¨ç†**: ä½¿ç”¨Grounded Semanticsè®¡ç®—å¯æ¥å—è®ºè¯
5. **å®Œå…¨å¯è§£é‡Š**: æä¾›å®Œæ•´çš„æ¨ç†é“¾è·¯å’Œè¯æ®æº¯æº

## ğŸ“ è¾“å‡ºç¤ºä¾‹

### åˆ¤å†³ç»“æœ (verdict.json)
```json
{
  "decision": "Refuted",
  "confidence": 0.85,
  "reasoning": "æ ¹æ®æ¬§ç›Ÿå®˜æ–¹æ–‡ä»¶,ç‡ƒæ²¹è½¦ç¦ä»¤çš„ç›®æ ‡å¹´ä»½ä¸º2035å¹´è€Œé2030å¹´...",
  "key_evidence": ["e_con_1_a3f2", "e_con_2_b4e1"],
  "argument_analysis": {
    "pro_strength": 0.45,
    "con_strength": 0.82,
    "accepted_pro_args": 1,
    "accepted_con_args": 3
  }
}
```

### è®ºè¾©å›¾ (argumentation_graph.json)
```json
{
  "claim": "æ¬§ç›Ÿè®¡åˆ’åœ¨2030å¹´å…¨é¢ç¦æ­¢é”€å”®ç‡ƒæ²¹è½¦ã€‚",
  "nodes": [
    {
      "id": "pro_arg_1_a3f2",
      "agent": "pro",
      "content": "...",
      "priority": 0.75,
      "evidence_ids": ["e1", "e2"]
    }
  ],
  "edges": [
    {
      "from_node_id": "con_arg_1_b4e1",
      "to_node_id": "pro_arg_1_a3f2",
      "strength": 0.15,
      "rationale": "é«˜ä¼˜å…ˆçº§(0.90)æ”»å‡»ä½ä¼˜å…ˆçº§(0.75)"
    }
  ]
}
```

## ğŸ”§ é…ç½®é€‰é¡¹

ç¼–è¾‘ `config.py`:
- `MAX_DEBATE_ROUNDS`: è¾©è®ºè½®æ¬¡(é»˜è®¤3)
- `MAX_SEARCH_QUERIES_PER_AGENT`: æ¯è½®æœç´¢è¯æ•°(é»˜è®¤5)
- `LLM_MODEL`: Claudeæ¨¡å‹
- `LLM_TEMPERATURE`: æ¸©åº¦å‚æ•°

## âœ… æµ‹è¯•é€šè¿‡

åŸºç¡€æµ‹è¯•å…¨éƒ¨é€šè¿‡:
- âœ“ æ•°æ®æ¨¡å‹
- âœ“ è®ºè¾©å›¾
- âœ“ è¯æ®æ± 
- âœ“ ä¼˜å…ˆçº§è®¡ç®—
- âœ“ å½¢å¼åŒ–è¯­ä¹‰

## ğŸ“š å‚è€ƒè®ºæ–‡

æœ¬ç³»ç»ŸåŸºäºä»¥ä¸‹ç ”ç©¶:
- Li et al. (2025). "Advancing Fact-checking for Large Language Models via Argumentative Reasoning"
- Argumentation Theory in AI
- Grounded Semantics (Dung 1995)

## ğŸ¤ è´¡çŒ®

æ¬¢è¿æäº¤Issueå’ŒPull Request!

---

**æ³¨æ„**: 
1. éœ€è¦é…ç½®ANTHROPIC_API_KEYå’ŒJINA_API_KEY
2. é¦–æ¬¡è¿è¡Œä¼šåˆ›å»ºoutputç›®å½•
3. å»ºè®®å…ˆè¿è¡Œtest_basic.pyç¡®è®¤ç¯å¢ƒæ­£å¸¸
